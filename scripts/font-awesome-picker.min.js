!function(){class e extends HTMLElement{constructor(){super(),this._icons=null,this._results=[],this._ready=!1,this._boundOnInput=function(e,t){let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>e(...i),t)}}(this._onInput.bind(this),250),this._selectedIcons=new Set,this._currentPage=1,this._iconsPerPage=20,this._scrollContainer=null,this._virtualScrollOffset=0}static get observedAttributes(){return["data-url","class","style","icons-per-page","multiple"]}attributeChangedCallback(e,t,s){if("data-url"===e&&t!==s&&this._ready&&this._loadIcons(),"icons-per-page"===e&&t!==s){const e=parseInt(s,10);!isNaN(e)&&e>0&&(this._iconsPerPage=e,this._ready&&(this._currentPage=1,this._renderResults()))}"multiple"===e&&t!==s&&this._ready&&(this._clearSelection(),this._renderResults())}get isMultipleMode(){return this.hasAttribute("multiple")&&"false"!==this.getAttribute("multiple")}getIconClassName(){return this.isMultipleMode?this._selectedIcons&&0!==this._selectedIcons.size?Array.from(this._selectedIcons).map(e=>{const t=e.lastIndexOf("-"),s=e.substring(t+1),i=e.substring(0,t);return`${this._styleToClass(s)} fa-${i}`}):[]:this._selectedIcon?this._selectedIcon.classString:""}getIconSVG(){return this.isMultipleMode?this._selectedIcons&&0!==this._selectedIcons.size?Array.from(this._selectedIcons).map(e=>{const t=e.lastIndexOf("-"),s=e.substring(t+1),i=e.substring(0,t);return this._getSvgString(i,s).raw}):[]:this._selectedIcon?this._selectedIcon.svgData.raw:""}getSelectedIcons(){if(this.isMultipleMode)return this._selectedIcons&&0!==this._selectedIcons.size?Array.from(this._selectedIcons).map(e=>{const t=e.lastIndexOf("-"),s=e.substring(t+1),i=e.substring(0,t),n=this._styleToClass(s),l=this._getSvgString(i,s);return{name:i,style:s,className:`${n} fa-${i}`,svg:l.raw,viewBox:l.viewBox,width:l.width,height:l.height}}):[];{if(!this._selectedIcon)return[];const{name:e,classString:t,svgData:s}=this._selectedIcon;return[{name:e,style:t.includes("fa-regular")?"regular":t.includes("fa-brands")?"brands":"solid",className:t,svg:s.raw,viewBox:s.viewBox,width:s.width,height:s.height}]}}clearInput(){this._input&&(this._input.value="",this._results=[],this._renderResults(),this._setInfo("Type to search icons"))}connectedCallback(){if(!this._ready){if(this._ready=!0,this.hasAttribute("icons-per-page")){const e=parseInt(this.getAttribute("icons-per-page"),10);!isNaN(e)&&e>0&&(this._iconsPerPage=e)}this.innerHTML='\n        <div class="fa-picker card p-4">\n          <div class="mb-4">\n            <label class="block text-sm font-medium mb-2">Search icons</label>\n            <input class="input input-bordered w-full" type="search" placeholder="Type icon name (eg: coffee, user, camera)..." />\n          </div>\n          \n          <div class="selection-toolbar mb-4 flex items-center justify-between gap-4" style="display: none;">\n            <div class="text-sm font-medium selected-count">0 icons selected</div>\n            <div class="flex gap-2">\n              <button class="btn btn-sm btn-outline clear-selection-btn">Clear Selection</button>\n              <button class="btn btn-sm btn-primary export-selected-btn">Export Selected</button>\n            </div>\n          </div>\n          \n          <div class="results-container pb-4" style="max-height: 400px; overflow-y: auto; position: relative;">\n            <div class="grid grid-cols-5 gap-4 results" style="grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));" aria-live="polite"></div>\n          </div>\n          \n          <div class="pagination-controls mt-4 flex items-center justify-center gap-2" style="display: none;">\n            <button class="btn btn-sm btn-outline prev-page-btn">Previous</button>\n            <div class="page-info text-sm font-medium"></div>\n            <button class="btn btn-sm btn-outline next-page-btn">Next</button>\n          </div>\n          \n          <div class="mt-4 flex items-center justify-between gap-4">\n            <div class="text-sm text-muted info flex-1"></div>\n            <button class="btn btn-primary btn-sm save-btn" style="display: none;">Download SVG</button>\n          </div>\n        </div>\n      ',this._input=this.querySelector('input[type="search"]'),this._resultsEl=this.querySelector(".results"),this._infoEl=this.querySelector(".info"),this._saveBtn=this.querySelector(".save-btn"),this._selectedIcon=null,this._selectionToolbar=this.querySelector(".selection-toolbar"),this._selectedCountEl=this.querySelector(".selected-count"),this._clearSelectionBtn=this.querySelector(".clear-selection-btn"),this._exportSelectedBtn=this.querySelector(".export-selected-btn"),this._paginationControls=this.querySelector(".pagination-controls"),this._prevPageBtn=this.querySelector(".prev-page-btn"),this._nextPageBtn=this.querySelector(".next-page-btn"),this._pageInfoEl=this.querySelector(".page-info"),this._scrollContainer=this.querySelector(".results-container"),this._input.addEventListener("input",e=>this._boundOnInput(e.target.value.trim())),this._input.addEventListener("keydown",e=>{"Escape"===e.key&&(this._input.value="")}),this._saveBtn.addEventListener("click",e=>{e.preventDefault(),this._downloadSvg()}),this._clearSelectionBtn.addEventListener("click",e=>{e.preventDefault(),this._clearSelection()}),this._exportSelectedBtn.addEventListener("click",e=>{e.preventDefault(),this._exportSelected()}),this._prevPageBtn.addEventListener("click",e=>{e.preventDefault(),this._changePage(-1)}),this._nextPageBtn.addEventListener("click",e=>{e.preventDefault(),this._changePage(1)}),this._loadIcons()}}async _loadIcons(){this._setInfo("Loading icon metadata...");try{const e=this.getAttribute("data-url")||"./assets/icons.json",t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch icons metadata");const s=await t.json();this._icons=s,this._setInfo(`Loaded ${Object.keys(this._icons).length} icons`)}catch(e){console.error(e),this._setInfo("Error loading icons metadata. Check console.")}}_setInfo(e){this._infoEl&&(this._infoEl.textContent=e)}_onInput(e){if(!e)return this._results=[],this._selectedIcon=null,this.isMultipleMode||(this._saveBtn.style.display="none"),this._renderResults(),void this._setInfo("Type to search icons");if(!this._icons)return void this._setInfo("Still loading icons...");let t=e.toLowerCase().trim();const s=[],i=t.match(/^(fa-(?:solid|regular|brands|light|thin|duotone|sharp))?\s*fa-(.+)$/);i&&(t=i[2]);const n=t.split(/\s+/).filter(e=>e.length>0),l=n.length>1;for(const e of Object.keys(this._icons)){const i=this._icons[e],o=l?this._scoreIconMultiWord(e,i,n):this._scoreIcon(e,i,t);o>0&&s.push({name:e,score:o})}s.sort((e,t)=>t.score!==e.score?t.score-e.score:e.name.localeCompare(t.name)),this._results=s.map(e=>e.name),this._currentPage=1,this._renderResults(),this._setInfo(`${s.length} ${1===s.length?"match":"matches"} found`)}_scoreIcon(e,t,s){let i=0;const n=e.toLowerCase(),l=t.label?t.label.toLowerCase():"";if(n===s)return 1e3;if(l===s)return 950;if(t.aliases&&t.aliases.names&&Array.isArray(t.aliases.names))for(const e of t.aliases.names)if(e.toLowerCase()===s)return 900;if(n.startsWith(s)&&(i+=500),t.aliases&&t.aliases.names&&Array.isArray(t.aliases.names))for(const e of t.aliases.names){const t=e.toLowerCase();if(t.startsWith(s)){i+=450;break}if(t.includes(s)){i+=350;break}}const o=n.split(/[-_\s]/);for(let e=0;e<o.length;e++){const t=o[e];t===s?i+=400-10*e:t.startsWith(s)&&(i+=300-10*e)}if(n.includes(s)&&(i+=200),l.includes(s)&&(l.startsWith(s)?i+=150:i+=100),t.search&&t.search.terms&&Array.isArray(t.search.terms))for(let e=0;e<t.search.terms.length;e++){const n=t.search.terms[e].toLowerCase();if(n===s){i+=80-2*e;break}if(n.startsWith(s)){i+=60-2*e;break}if(n.includes(s)){i+=40-2*e;break}}return i}_scoreIconMultiWord(e,t,s){const i=e.toLowerCase(),n=t.label?t.label.toLowerCase():"",l=t.aliases&&t.aliases.names?t.aliases.names.map(e=>e.toLowerCase()).join(" "):"",o=t.search&&t.search.terms&&Array.isArray(t.search.terms)?t.search.terms.map(e=>e.toLowerCase()).join(" "):"",a=`${i} ${n} ${l} ${o}`;if(s.filter(e=>a.includes(e)).length!==s.length)return 0;let r=100;for(const e of s)i.includes(e)&&(i.startsWith(e)?r+=200:i.split(/[-_]/).some(t=>t===e)?r+=150:r+=100),l.includes(e)&&(r+=80),n.includes(e)&&(r+=60),o.includes(e)&&(r+=40);const c=s.join(" ");return i.includes(c)?r+=300:n.includes(c)&&(r+=200),r}_renderResults(){if(this._resultsEl.innerHTML="",!this._results.length)return this._resultsEl.innerHTML='<div class="col-span-5 text-center text-sm text-muted">No icons</div>',this._paginationControls.style.display="none",void(this.isMultipleMode||(this._saveBtn.style.display="none"));const e=Math.ceil(this._results.length/this._iconsPerPage),t=(this._currentPage-1)*this._iconsPerPage,s=Math.min(t+this._iconsPerPage,this._results.length),i=this._results.slice(t,s);this._results.length>this._iconsPerPage?(this._paginationControls.style.display="flex",this._pageInfoEl.textContent=`Page ${this._currentPage} of ${e} (${this._results.length} icons)`,this._prevPageBtn.disabled=1===this._currentPage,this._nextPageBtn.disabled=this._currentPage===e):this._paginationControls.style.display="none";for(const e of i){const t=this._icons[e]||{},s=t.styles&&t.styles[0]||"solid",i=this._styleToClass(s),n=`${e}-${s}`,l=this.isMultipleMode?this._selectedIcons.has(n):this._selectedIcon&&this._selectedIcon.name===e&&this._selectedIcon.classString.includes(s),o=document.createElement("button");o.setAttribute("type","button"),o.className="flex flex-col items-center gap-2 p-2 bg-base-100 rounded-lg hover:shadow-lg cursor-pointer "+(l?"border-primary border-2":""),o.dataset.iconKey=n,o.innerHTML=`\n          <div class="text-2xl"> <i class="${i} fa-${e}"></i> </div>\n          <div class="text-xs text-center w-full whitespace-normal break-words" style="line-height: 1.2;">${e}</div>\n          ${l&&this.isMultipleMode?'<div class="badge badge-primary badge-xs">Selected</div>':""}\n        `,o.addEventListener("click",t=>{t.preventDefault();const n=o.dataset.iconKey,l=`${i} fa-${e}`,a=this._getSvgString(e,s);if(this.isMultipleMode){if(this._selectedIcons.has(n)){this._selectedIcons.delete(n),o.classList.remove("border-primary","border-2");const e=o.querySelector(".badge");e&&e.remove()}else this._selectedIcons.add(n),o.classList.add("border-primary","border-2"),o.innerHTML+='<div class="badge badge-primary badge-xs">Selected</div>',this._selectedIcon={name:e,classString:l,svgData:a};this._updateSelectionUI(),this._dispatchSelectionChange()}else this._selectedIcon&&this._selectedIcon.name===e&&this._selectedIcon.classString===l?(this._selectedIcon=null,this._saveBtn.style.display="none",this._renderResults(),this.dispatchEvent(new CustomEvent("change",{detail:{icon:null,svg:null,name:null},bubbles:!0,composed:!0}))):(this._selectedIcon={name:e,classString:l,svgData:a},this._renderResults(),this._saveBtn.style.display="block",this.dispatchEvent(new CustomEvent("change",{detail:{icon:l,svg:a.raw,name:e},bubbles:!0,composed:!0})))}),this._resultsEl.appendChild(o)}}_styleToClass(e){switch(e){case"solid":default:return"fa-solid";case"regular":return"fa-regular";case"brands":return"fa-brands"}}_getSvgString(e,t){const s=this._icons[e];return s&&s.svg&&s.svg[t]?{raw:s.svg[t].raw||"",viewBox:s.svg[t].viewBox?s.svg[t].viewBox.join(" "):"0 0 512 512",width:s.svg[t].width||512,height:s.svg[t].height||512}:{raw:"",viewBox:"0 0 512 512"}}_downloadSvg(){if(!this._selectedIcon)return;const{name:e,classString:t,svgData:s}=this._selectedIcon;if(!s.raw)return void this._setInfo("SVG data not available for this icon");const i=new Blob([s.raw],{type:"image/svg+xml"}),n=URL.createObjectURL(i),l=document.createElement("a");l.href=n,l.download=`${t.replace(/\s+/g,"-")}.svg`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}_changePage(e){const t=Math.ceil(this._results.length/this._iconsPerPage);this._currentPage=Math.max(1,Math.min(t,this._currentPage+e)),this._renderResults(),this._scrollContainer.scrollTop=0}_updateSelectionUI(){const e=this._selectedIcons?this._selectedIcons.size:0;this.isMultipleMode?e>0?(this._selectionToolbar.style.display="flex",this._selectedCountEl.textContent=`${e} icon${1!==e?"s":""} selected`,this._saveBtn.style.display=1===e?"block":"none"):(this._selectionToolbar.style.display="none",this._saveBtn.style.display="none"):this._selectionToolbar.style.display="none"}_clearSelection(){this._selectedIcons&&this._selectedIcons.clear(),this._selectedIcon=null,this._updateSelectionUI(),this._renderResults(),this._dispatchSelectionChange()}_dispatchSelectionChange(){if(!this.isMultipleMode)return;if(!this._selectedIcons)return;const e=Array.from(this._selectedIcons).map(e=>{const t=e.lastIndexOf("-"),s=e.substring(t+1),i=e.substring(0,t);return{name:i,style:s,icon:`${this._styleToClass(s)} fa-${i}`,svg:this._getSvgString(i,s).raw}});this.dispatchEvent(new CustomEvent("selectionchange",{detail:{selectedIcons:e,count:this._selectedIcons.size},bubbles:!0,composed:!0}))}async _exportSelected(){if(this._selectedIcons&&0!==this._selectedIcons.size)if("undefined"!=typeof JSZip)try{const e=new JSZip,t=e.folder("font-awesome-icons");for(const e of this._selectedIcons){const s=e.lastIndexOf("-"),i=e.substring(s+1),n=e.substring(0,s),l=this._styleToClass(i),o=this._getSvgString(n,i);if(o.raw){const e=`${l.replace(/\s+/g,"-")}-fa-${n}.svg`;t.file(e,o.raw)}}const s=await e.generateAsync({type:"blob"}),i=URL.createObjectURL(s),n=document.createElement("a");n.href=i,n.download=`font-awesome-icons-${Date.now()}.zip`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i),this._setInfo(`${this._selectedIcons.size} icons exported successfully!`)}catch(e){console.error("Export failed:",e),this._setInfo("Export failed. Falling back to individual downloads."),this._exportSelectedIndividually()}else this._exportSelectedIndividually();else this._setInfo("No icons selected")}_exportSelectedIndividually(){let e=0;for(const t of this._selectedIcons){const s=t.split("-").pop(),i=t.substring(0,t.lastIndexOf("-"+s)),n=this._styleToClass(s),l=this._getSvgString(i,s);l.raw&&(setTimeout(()=>{const e=new Blob([l.raw],{type:"image/svg+xml"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`${n.replace(/\s+/g,"-")}-fa-${i}.svg`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},100*e),e++)}this._setInfo(`Downloading ${e} icons individually...`)}}customElements.define("font-awesome-picker",e)}();